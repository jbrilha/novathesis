%!TEX root = ../../template.tex

\section{Progress Report}
\label{sec:progress}

The implementation of \gls{ubabel} is currently in its early stages, with
protocol-specific handlers under development. 

The Core Infrastructure Layer (Section~\ref{subsec:core_infra}) is partially
complete. \glspl{HAL} for peripheral access (\gls{GPIO}, \gls{SPI} and
\gls{I2C}) are functional across both ESP-IDF and Pico SDK platforms; the Event
Dispatcher is operational, providing event-driven communication between
components, and the Communication Manager currently supports Wi-Fi peer
connection management, and unicast/multicast message delivery.

The Discovery \& Topology Layer (Section~\ref{subsec:discovery_topology}) has
one working component in the Peer Discovery Service, which currently supports
discovery over Wi-Fi.

The Coordination (Section~\ref{subsec:coordination}), and Data Management
(Section~\ref{subsec:data_management}) Layers remain in the planning and design
phase.

\paragraph{Proof-of-Concept Deployment:} The current system has been deployed
and tested on M5Stack Core Basic~\cite{m5corebasic} devices (ESP32-based) by
commanding multiple Raspberry Pi 5 boards attached to actuators, demonstrating
an "inversion of control" to signal the flexibility and potential of the
proposed system.

\subsection{Use Cases}
\label{subsec:use_cases}

To guide development and validate \gls{ubabel}'s implementation, we consider
two complementary deployment scenarios that showcase different aspects of the
system's capabilities. These use cases are meant to demonstrate operation
during normal and simulated disaster conditions, taking advantage of a
heterogeneous collection of devices (i.e., resource-constrained sensors and
more capable gateways) with optional cloud integration).

\subsubsection*{Campus-Wide Environmental Monitoring}
\label{subsubsec:uc_campus}

\paragraph{Deployment Context:}

A university campus with sensors distributed across multiple buildings to
monitor environmental conditions (e.g., temperature, humidity, CO$_2$ levels,
occupancy) and classroom occupancy\todo{TODO: look into Millimeter Wave Radar}.
The deployment consists of:

\begin{itemize}
    \item \textbf{Class-1 sensor nodes:} Battery-powered devices (ESP32-family,
        Pico 2 W) placed throughout rooms and corridors, performing periodic
        sensing
    \item \textbf{Class-1 gateway nodes:} Battery-powered devices with greater
        resources (ESP32-S3/P4) at strategic locations within each building,
        serving as protocol bridges and data aggregators
    \item \textbf{Class-2 aggregation nodes:} Grid-powered Raspberry Pi devices
        in server rooms or management offices, providing additional processing
        capacity and optional cloud connectivity
\end{itemize}

\paragraph{Normal Operation Mode:} During stable conditions, the system
operates with cloud connectivity when available, with Class-2 devices acting as
\gls{MQTT} brokers and makeshift cloud servers. Sensor nodes form local meshes
within buildings, forwarding data through gateway nodes to building-level
aggregators. 

This mode validates:
(1) Multi-protocol communication for different ranges: \gls{BLE} within rooms,
\gls{ESP-NOW}/\gls{ZigBee} between floors, \gls{LoRa} across buildings;
(2) Topology management with hybrid active/passive views;
(3) Data reduction for efficient transmission;
(4) Optional cloud integration (\gls{NFR},
Section~\ref{subsubsec:nonfunc_reqs}).

% This mode validates:
% \begin{itemize}
%     \item Multi-protocol communication for different ranges: \gls{BLE} within
%         rooms, \gls{ESP-NOW}/\gls{ZigBee} between floors, \gls{LoRa} across
%         buildings
%     \item Topology management with hybrid active/passive views
%     \item Data reduction for efficient transmission
%     \item Optional cloud integration (Non-Functional Requirement,
%         Section~\ref{subsubsec:nonfunc_reqs})
% \end{itemize}

\paragraph{Disaster Operation Mode:} Upon infrastructure failure (simulated
power outage or network collapse), battery-powered sensors continue autonomous
operation. The system maintains local coordination through \gls{P2P} gossip
interactions, with Class-1 gateways aggregating data from their vicinity and
coordinating between buildings via \gls{LoRa}.

This mode validates:
(1) Infrastructure independence (\gls{FR}, Section~\ref{subsubsec:func_reqs});
(2) Autonomous operation without cloud connectivity;
(3) Protocol adaptation when primary mediums become unavailable;
(4) Store-and-forward mechanisms;
(5) Resource-efficient operation on limited battery power.

% This mode validates:
% \begin{itemize}
%     \item Infrastructure independence (Functional Requirement,
%         Section~\ref{subsubsec:func_reqs})
%     \item Autonomous operation without cloud connectivity
%     \item Protocol adaptation when primary mediums become unavailable
%     \item Store-and-forward mechanisms
%     \item Resource-efficient operation on limited battery power
% \end{itemize}

\subsubsection*{Building Safety and Evacuation System}
\label{subsubsec:uc_safety}

\paragraph{Deployment Context:}
A safety-focused monitoring system, combining environmental hazard detection
(smoke, fire, CO$_2$, structural integrity\todo{a "earthquake detection" de
SCMU n√£o funcionava muito bem... maybe outra coisa?}) with occupancy tracking
and evacuation guidance. This use case expands upon the campus scenario by
emphasizing real-time responsiveness and critical message prioritization:

\begin{itemize}
    \item \textbf{Class-1 hazard sensors:} Fixed sensors at key locations
        (stairwells, corridors, rooms) for smoke, temperature, and air quality
        monitoring
    \item \textbf{Class-1 gateway nodes:} Per-floor devices maintaining
        floor-level mesh coordination and hazard aggregation
    \item \textbf{Class-2 building coordinator:} Central aggregation point
        integrating with existing building management systems when available
    \item \textbf{Mobile display nodes:} Battery-powered displays (ESP32-S3/P4
        with e-paper or small screens) showing evacuation routes and hazard
        warnings
\end{itemize}

\paragraph{Normal Operation Mode:} The system continuously monitors
environmental conditions and occupancy patterns, integrating with building
management infrastructure for logging and analysis. Sensor readings are
transmitted via short-range protocols (\gls{BLE}, \gls{ESP-NOW}) to floor
gateways, which forward aggregated data to the building coordinator.

This mode validates:
(1) Priority-based message queuing (critical vs. periodic data);
(2) Low-latency local communication for real-time monitoring;
(3) Integration with existing infrastructure.

% This mode validates:
% \begin{itemize}
%     \item Priority-based message queuing (critical vs. periodic data)
%     \item Low-latency local communication for real-time monitoring
%     \item Integration with existing infrastructure
% \end{itemize}

\paragraph{Disaster Operation Mode:} Upon detecting hazardous conditions or
infrastructure failure, the system automatically transitions to emergency mode.
Hazard sensors immediately broadcast critical alerts via available protocols,
floor gateways compute safe evacuation routes based on detected
hazards\todo{might be overpromising, cada um teria de manter some sort of
layout info...}, and displays show real-time evacuation guidance reflecting
current conditions.
\todo{ou.... layout info stored in an SD card? much to consider}

This mode validates:
(1) Autonomous operation during infrastructure collapse;
(2) Multi-protocol broadcast for critical alerts (redundancy through protocol
diversity);
(3) Decentralized coordination without central controllers;
(4) Adaptive protocol selection under emergency conditions;
(5) Real-time responsiveness despite limited resources.

% This mode validates:
% \begin{itemize}
%     \item Autonomous operation during infrastructure collapse (Functional
%         Requirement)
%     \item Multi-protocol broadcast for critical alerts (redundancy through
%         protocol diversity)
%     \item Decentralized coordination without central controllers
%     \item Adaptive protocol selection under emergency conditions
%     \item Real-time responsiveness despite limited resources
% \end{itemize}
